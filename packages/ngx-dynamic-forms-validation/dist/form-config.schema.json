{
  "$ref": "#/definitions/FormConfig",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "AsyncValidationConfig": {
      "additionalProperties": false,
      "description": "Async validation configuration using named validator pattern Works across client and server by referencing registered validators",
      "properties": {
        "debounceMs": {
          "description": "Debounce delay in milliseconds (default: 300) Only applies when trigger is 'change'",
          "type": "number"
        },
        "params": {
          "description": "Optional parameters to pass to the async validator",
          "type": "object"
        },
        "trigger": {
          "description": "Optional trigger for when validation should run\n- 'blur': Validate when field loses focus (default)\n- 'change': Validate on every change",
          "enum": [
            "blur",
            "change"
          ],
          "type": "string"
        },
        "validatorName": {
          "description": "Name of the registered async validator Must be registered on both client and server",
          "type": "string"
        }
      },
      "required": [
        "validatorName"
      ],
      "type": "object"
    },
    "AutocompleteConfig": {
      "additionalProperties": false,
      "description": "Autocomplete field configuration",
      "properties": {
        "debounceMs": {
          "type": "number"
        },
        "fetchHandlerName": {
          "type": "string"
        },
        "loadingMessage": {
          "type": "string"
        },
        "minSearchLength": {
          "type": "number"
        },
        "noResultsMessage": {
          "type": "string"
        },
        "params": {
          "type": "object"
        },
        "placeholder": {
          "type": "string"
        }
      },
      "required": [
        "fetchHandlerName"
      ],
      "type": "object"
    },
    "CountryCodeOption": {
      "additionalProperties": false,
      "description": "Country code option for phone field",
      "properties": {
        "code": {
          "type": "string"
        },
        "country": {
          "type": "string"
        },
        "flag": {
          "type": "string"
        }
      },
      "required": [
        "code",
        "country"
      ],
      "type": "object"
    },
    "DataGridColumnConfig": {
      "additionalProperties": false,
      "description": "DataGrid column configuration",
      "properties": {
        "computed": {
          "type": "boolean"
        },
        "formula": {
          "$ref": "#/definitions/DataGridFormula"
        },
        "label": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "options": {
          "items": {
            "additionalProperties": false,
            "properties": {
              "label": {
                "type": "string"
              },
              "value": {}
            },
            "required": [
              "label",
              "value"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "placeholder": {
          "type": "string"
        },
        "showInColumnTotal": {
          "type": "boolean"
        },
        "showInRowTotal": {
          "type": "boolean"
        },
        "type": {
          "$ref": "#/definitions/DataGridColumnType"
        },
        "validations": {
          "items": {
            "$ref": "#/definitions/ValidationRule"
          },
          "type": "array"
        },
        "width": {
          "type": "number"
        }
      },
      "required": [
        "name",
        "label",
        "type"
      ],
      "type": "object"
    },
    "DataGridColumnGroup": {
      "additionalProperties": false,
      "description": "DataGrid column group configuration for two-tier headers",
      "properties": {
        "columnIds": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "id": {
          "type": "string"
        },
        "label": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "label",
        "columnIds"
      ],
      "type": "object"
    },
    "DataGridColumnType": {
      "description": "Column types supported within datagrids",
      "enum": [
        "text",
        "number",
        "date",
        "select"
      ],
      "type": "string"
    },
    "DataGridConfig": {
      "additionalProperties": false,
      "description": "DataGrid field configuration",
      "properties": {
        "columnGroups": {
          "items": {
            "$ref": "#/definitions/DataGridColumnGroup"
          },
          "type": "array"
        },
        "columns": {
          "items": {
            "$ref": "#/definitions/DataGridColumnConfig"
          },
          "type": "array"
        },
        "rowLabelHeader": {
          "type": "string"
        },
        "rowLabels": {
          "items": {
            "$ref": "#/definitions/DataGridRowLabel"
          },
          "type": "array"
        },
        "totals": {
          "$ref": "#/definitions/DataGridTotalsConfig"
        }
      },
      "required": [
        "columns",
        "rowLabels"
      ],
      "type": "object"
    },
    "DataGridFormula": {
      "additionalProperties": false,
      "description": "Computed column formula configuration",
      "properties": {
        "expression": {
          "type": "string"
        },
        "type": {
          "const": "expression",
          "type": "string"
        }
      },
      "required": [
        "type",
        "expression"
      ],
      "type": "object"
    },
    "DataGridRowLabel": {
      "additionalProperties": false,
      "description": "DataGrid row label configuration",
      "properties": {
        "id": {
          "type": "string"
        },
        "label": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "label"
      ],
      "type": "object"
    },
    "DataGridTotalsConfig": {
      "additionalProperties": false,
      "description": "DataGrid totals configuration",
      "properties": {
        "columnTotalLabel": {
          "type": "string"
        },
        "rowTotalLabel": {
          "type": "string"
        },
        "showColumnTotals": {
          "type": "boolean"
        },
        "showRowTotals": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "DateRangeConfig": {
      "additionalProperties": false,
      "description": "Date range field configuration",
      "properties": {
        "fromLabel": {
          "type": "string"
        },
        "separatorText": {
          "type": "string"
        },
        "toDateOptional": {
          "type": "boolean"
        },
        "toLabel": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "FieldType": {
      "description": "Supported form field types",
      "enum": [
        "text",
        "email",
        "number",
        "textarea",
        "select",
        "checkbox",
        "radio",
        "date",
        "daterange",
        "table",
        "info",
        "datagrid",
        "phone",
        "formref",
        "fileupload",
        "autocomplete"
      ],
      "type": "string"
    },
    "FileUploadConfig": {
      "additionalProperties": false,
      "description": "File upload field configuration",
      "properties": {
        "allowDownload": {
          "type": "boolean"
        },
        "allowDragDrop": {
          "type": "boolean"
        },
        "allowedExtensions": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "allowedMimeTypes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "dragDropLabel": {
          "type": "string"
        },
        "maxFileSize": {
          "type": "number"
        },
        "maxFiles": {
          "type": "number"
        },
        "minFiles": {
          "type": "number"
        },
        "showFileSize": {
          "type": "boolean"
        },
        "uploadButtonLabel": {
          "type": "string"
        },
        "uploadTiming": {
          "$ref": "#/definitions/FileUploadTiming"
        }
      },
      "type": "object"
    },
    "FileUploadTiming": {
      "description": "File upload timing configuration",
      "enum": [
        "immediate",
        "manual"
      ],
      "type": "string"
    },
    "FormConfig": {
      "additionalProperties": false,
      "description": "Complete form configuration",
      "properties": {
        "autoSave": {
          "type": "boolean"
        },
        "autoSaveInterval": {
          "type": "number"
        },
        "fields": {
          "items": {
            "$ref": "#/definitions/FormFieldConfig"
          },
          "type": "array"
        },
        "id": {
          "type": "string"
        },
        "saveLabel": {
          "description": "Label for save button (for use by consuming application)",
          "type": "string"
        },
        "sections": {
          "items": {
            "$ref": "#/definitions/FormSection"
          },
          "type": "array"
        },
        "submitLabel": {
          "description": "Label for submit button (for use by consuming application)",
          "type": "string"
        },
        "wizard": {
          "$ref": "#/definitions/WizardConfig",
          "description": "Wizard mode configuration - splits form into multi-page wizard"
        }
      },
      "required": [
        "id",
        "fields"
      ],
      "type": "object"
    },
    "FormFieldConfig": {
      "additionalProperties": false,
      "description": "Field configuration for dynamic form",
      "properties": {
        "archived": {
          "type": "boolean"
        },
        "asyncValidation": {
          "$ref": "#/definitions/AsyncValidationConfig"
        },
        "autocompleteConfig": {
          "$ref": "#/definitions/AutocompleteConfig"
        },
        "condition": {
          "$ref": "#/definitions/ValidationCondition"
        },
        "content": {
          "type": "string"
        },
        "cssClass": {
          "type": "string"
        },
        "datagridConfig": {
          "$ref": "#/definitions/DataGridConfig"
        },
        "daterangeConfig": {
          "$ref": "#/definitions/DateRangeConfig"
        },
        "description": {
          "type": "string"
        },
        "disabled": {
          "type": "boolean"
        },
        "fileuploadConfig": {
          "$ref": "#/definitions/FileUploadConfig"
        },
        "formrefConfig": {
          "$ref": "#/definitions/FormRefConfig"
        },
        "inlineGroup": {
          "type": "string"
        },
        "label": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "options": {
          "items": {
            "additionalProperties": false,
            "properties": {
              "label": {
                "type": "string"
              },
              "value": {}
            },
            "required": [
              "label",
              "value"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "order": {
          "type": "number"
        },
        "phoneConfig": {
          "$ref": "#/definitions/PhoneConfig"
        },
        "placeholder": {
          "type": "string"
        },
        "sectionId": {
          "type": "string"
        },
        "tableConfig": {
          "$ref": "#/definitions/TableConfig"
        },
        "type": {
          "$ref": "#/definitions/FieldType"
        },
        "validations": {
          "items": {
            "$ref": "#/definitions/ValidationRule"
          },
          "type": "array"
        },
        "value": {},
        "width": {
          "type": "number"
        }
      },
      "required": [
        "name",
        "label",
        "type"
      ],
      "type": "object"
    },
    "FormRefConfig": {
      "additionalProperties": false,
      "description": "Form reference field configuration - embeds fields from another form",
      "properties": {
        "fieldPrefix": {
          "type": "string"
        },
        "formId": {
          "type": "string"
        },
        "showSections": {
          "type": "boolean"
        }
      },
      "required": [
        "formId"
      ],
      "type": "object"
    },
    "FormSection": {
      "additionalProperties": false,
      "description": "Form section configuration",
      "properties": {
        "anchorId": {
          "type": "string"
        },
        "condition": {
          "$ref": "#/definitions/ValidationCondition"
        },
        "description": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "order": {
          "type": "number"
        },
        "title": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "title"
      ],
      "type": "object"
    },
    "PhoneConfig": {
      "additionalProperties": false,
      "description": "Phone field configuration",
      "properties": {
        "countryCodes": {
          "items": {
            "$ref": "#/definitions/CountryCodeOption"
          },
          "type": "array"
        },
        "defaultCountryCode": {
          "type": "string"
        }
      },
      "required": [
        "countryCodes"
      ],
      "type": "object"
    },
    "TableColumnConfig": {
      "additionalProperties": false,
      "description": "Table column configuration",
      "properties": {
        "label": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "options": {
          "items": {
            "additionalProperties": false,
            "properties": {
              "label": {
                "type": "string"
              },
              "value": {}
            },
            "required": [
              "label",
              "value"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "placeholder": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/TableColumnType"
        },
        "validations": {
          "items": {
            "$ref": "#/definitions/ValidationRule"
          },
          "type": "array"
        },
        "width": {
          "type": "number"
        }
      },
      "required": [
        "name",
        "label",
        "type"
      ],
      "type": "object"
    },
    "TableColumnType": {
      "description": "Column types supported within tables (subset of FieldType)",
      "enum": [
        "text",
        "number",
        "date",
        "select"
      ],
      "type": "string"
    },
    "TableConfig": {
      "additionalProperties": false,
      "description": "Table field configuration",
      "properties": {
        "addRowLabel": {
          "type": "string"
        },
        "columns": {
          "items": {
            "$ref": "#/definitions/TableColumnConfig"
          },
          "type": "array"
        },
        "fixedRowCount": {
          "type": "number"
        },
        "maxRows": {
          "type": "number"
        },
        "minRows": {
          "type": "number"
        },
        "removeRowLabel": {
          "type": "string"
        },
        "rowMode": {
          "$ref": "#/definitions/TableRowMode"
        }
      },
      "required": [
        "columns",
        "rowMode"
      ],
      "type": "object"
    },
    "TableRowMode": {
      "description": "Table row mode configuration",
      "enum": [
        "fixed",
        "dynamic"
      ],
      "type": "string"
    },
    "ValidationCondition": {
      "additionalProperties": false,
      "description": "Condition that determines when a validation rule applies",
      "properties": {
        "field": {
          "description": "Field/column to evaluate.\n- For standalone fields: field name (e.g., \"tenure\")\n- For table columns: column name for same-row (e.g., \"tenure\")   or \"$form.fieldName\" for form-level fields (e.g., \"$form.employmentType\")",
          "type": "string"
        },
        "operator": {
          "$ref": "#/definitions/ValidationConditionOperator"
        },
        "value": {
          "description": "Value to compare against. Required for 'equals' and 'notEquals'. Ignored for 'isEmpty' and 'isNotEmpty'."
        }
      },
      "required": [
        "field",
        "operator"
      ],
      "type": "object"
    },
    "ValidationConditionOperator": {
      "description": "Comparison operators for validation conditions",
      "enum": [
        "equals",
        "notEquals",
        "isEmpty",
        "isNotEmpty"
      ],
      "type": "string"
    },
    "ValidationRule": {
      "additionalProperties": false,
      "description": "Validation rule configuration",
      "properties": {
        "condition": {
          "$ref": "#/definitions/ValidationCondition",
          "description": "Optional condition that must be met for this validation to apply. If not specified, validation always applies."
        },
        "customValidatorName": {
          "description": "Name of a registered custom validator (works on client and server)",
          "type": "string"
        },
        "customValidatorParams": {
          "description": "Parameters to pass to the custom validator",
          "type": "object"
        },
        "message": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/ValidationRuleType"
        },
        "value": {}
      },
      "required": [
        "type",
        "message"
      ],
      "type": "object"
    },
    "ValidationRuleType": {
      "description": "Validation rule type",
      "enum": [
        "required",
        "email",
        "minLength",
        "maxLength",
        "min",
        "max",
        "pattern",
        "custom"
      ],
      "type": "string"
    },
    "WizardConfig": {
      "additionalProperties": false,
      "description": "Wizard configuration settings",
      "properties": {
        "allowFreeNavigation": {
          "type": "boolean"
        },
        "nextLabel": {
          "type": "string"
        },
        "pages": {
          "items": {
            "$ref": "#/definitions/WizardPage"
          },
          "type": "array"
        },
        "prevLabel": {
          "type": "string"
        },
        "showPageNumbers": {
          "type": "boolean"
        },
        "showProgressBar": {
          "type": "boolean"
        },
        "submitLabel": {
          "type": "string"
        }
      },
      "required": [
        "pages"
      ],
      "type": "object"
    },
    "WizardPage": {
      "additionalProperties": false,
      "description": "Wizard page configuration - groups sections into navigable pages",
      "properties": {
        "condition": {
          "$ref": "#/definitions/ValidationCondition"
        },
        "description": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "order": {
          "type": "number"
        },
        "sectionIds": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "title": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "title",
        "sectionIds"
      ],
      "type": "object"
    }
  }
}